<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>
        {% block title %}
            签名墙
        {% endblock %}
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="在线一对一少儿编程"/>
    <link rel="shortcut icon" href="/static/img/kuding.ico">
    <!--font awesome图标引用地址-->
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">
    <!-- Animate.css -->
    <link rel="stylesheet" href="/static/css/animate.css">
    <!-- Icomoon Icon Fonts-->
    <link rel="stylesheet" href="/static/css/icomoon.css">
    <!-- Bootstrap  -->
    <link rel="stylesheet" href="/static/plug/bootstrap/css/bootstrap.css">

    <!-- Magnific Popup -->
    <link rel="stylesheet" href="/static/css/magnific-popup.css">

    <!-- Owl Carousel  -->
    <link rel="stylesheet" href="/static/css/owl.carousel.min.css">
    <link rel="stylesheet" href="/static/css/owl.theme.default.min.css">

    <!-- Theme style  -->
    <link rel="stylesheet" href="/static/css/z_style.css">
    <link rel="stylesheet" href="/static/css/qt_style.css">

    <!-- Modernizr JS -->
    <script src="/static/js/modernizr-2.6.2.min.js"></script>
    <script src="/static/js/respond.min.js"></script>
    <style type="text/css">
        .footer-section {
            margin-top: 0px;
        }
    </style>

    <style type="text/css">

        html {
            -webkit-text-size-adjust: none;
        }

        @font-face {
            font-family: "草书";
            src: url("/static/ttf/caoshu.TTF");
        }

        @font-face {
            font-family: "小奶泡";
            src: url("/static/ttf/xiaonaibao.ttf");
        }

        @font-face {
            font-family: "腾祥婀娜体简";
            src: url("/static/ttf/TTENuoJ_0.ttf");
        }

        @font-face {
            font-family: "哈哈呼嘿字";
            src: url("/static/ttf/heiheihuahu.ttf");
        }

        @font-face {
            font-family: "甜蜜小女生";
            src: url("/static/ttf/tianmi.ttf");
        }

        @font-face {
            font-family: "桃心悦圆";
            src: url("/static/ttf/taoxin.ttf");
        }

        @font-face {
            font-family: "小雨滴";
            src: url("/static/ttf/xioayudi.ttf");
        }

        @font-face {
            font-family: "可爱萌宠体";
            src: url("/static/ttf/keai.ttf");
        }

        @font-face {
            font-family: "腾祥泡泡体繁";
            src: url("/static/ttf/Tensentype-PaoPaoF.ttf");
        }

        @font-face {
            font-family: "爱心小兔";
            src: url("/static/ttf/xiaotu.ttf");
        }

        @font-face {
            font-family: "浪花";
            src: url("/static/ttf/langhua.otf");
        }
    </style>

    <link rel="preload" href="/static/ttf/caoshu.TTF" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/static/ttf/tianmi.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/static/ttf/TTENuoJ_0.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/static/ttf/xiaonaibao.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/static/ttf/xiaotu.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/static/ttf/xioayudi.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/static/ttf/langhua.otf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/static/ttf/taoxin.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/static/ttf/Tensentype-PaoPaoF.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/static/ttf/STHeiti-Light.ttc" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/static/ttf/keai.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/static/ttf/heiheihuahu.ttf" as="font" type="font/ttf" crossorigin="anonymous">
</head>
<body>
<!--这里是模态框的内容-->
<div class="motai_con fadeIn">
    <!-- 登录 -->
    <div class="modal_data fadeIn">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><i class="fa fa-times reset"
                                                                                       style="color: #000; top: 18px; left: 450px; font-size: 28px"
                                                                                       aria-hidden="true"></i></button>
        <h3>登录</h3>
        <form action="" method="post">
            <div class="info">{% csrf_token %}</div>
            <div>
                <label for="{{ loginForm.log_account.id_for_label }}">{{ loginForm.log_account.label }}</label>
                <i class="fa fa-user" aria-hidden="true"></i>
                {{ loginForm.log_account }}
            </div>
            <span class="notice-erro">{{ loginForm.log_account.errors.0 }}</span><br>
            <div>
                <label for="{{ loginForm.log_password.id_for_label }}">{{ loginForm.log_password.label }}</label>
                <i class="fa fa-key" aria-hidden="true"></i>
                {{ loginForm.log_password }}
            </div>
            <span class="notice-erro">{{ loginForm.log_password.errors.0 }}</span><br>
            <div class="identify">
                {{ loginForm.log_role }}
                <div style="clear:both"></div>
            </div>
            <button type="button" class="btn btn-primary reset">取消</button>
            <button type="button" id="login" class="btn btn-success">登录</button>
            <a href="#" id="forget_btn">忘记密码</a>
        </form>
    </div>

    <!-- 注册 -->
    <div class="mod-register">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><i class="fa fa-times reset"
                                                                                       style="color: #000; top: 18px; left: 450px; font-size: 28px"
                                                                                       aria-hidden="true"></i></button>
        <h3>注册</h3>
        <form action="" novalidate method="post">
            <div class="info">{% csrf_token %}</div>

            <div>
                <label for="{{ reg.name.id_for_label }}">{{ reg.name.label }}</label>
                <i class="fa fa-user" aria-hidden="true"></i>
                {{ reg.name }} <span>{{ reg.name.errors.0 }}</span><br>
            </div>
            <div>
                <label for="{{ reg.password.id_for_label }}">{{ reg.password.label }}</label>
                <i class="fa fa-key" aria-hidden="true"></i>
                {{ reg.password }} <span>{{ reg.password.errors.0 }}</span><br>
            </div>
            <div>
                <label for="{{ reg.re_password.id_for_label }}">{{ reg.re_password.label }}</label>
                <i class="fa fa-key" aria-hidden="true"></i>
                {{ reg.re_password }} <span>{{ reg.re_password.errors.0 }}</span><br>
            </div>
            <div>
                <label>头像</label>
                <label for="id_avatar"><img style="margin-left: -51px;width: 100px;height: 100px;" id="avatar-img"
                                            src="/static/img/deflaut.png" alt=""></label>
                <input accept="image/*" type="file" name="avatar" id="id_avatar" style="display: none">
                <span></span>
            </div>
            <div class="s_reg_account">
                <label for="{{ reg.account.id_for_label }}">{{ reg.account.label }}</label>
                <i class="fa fa-mobile" aria-hidden="true"></i>
                {{ reg.account }} <span>{{ reg.account.errors.0 }}</span><br>
            </div>
            <label for="message-check">验证码：</label>
            <input type="text" placeholder="验证码" class="message-check">
            <button type="button" class="getmessage">获取验证码</button>
            <br>
            <span class="erro-check"></span><br>
            <div class="mod_reg">
                <button type="button" name="reset" class="btn btn-primary reset">取消</button>
                <button type="button" name="reg" class="btn btn-success">注册</button>
            </div>
        </form>
    </div>

    <!-- 找回密码 -->
    <div class="forget_pwd">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><i class="fa fa-times reset"
                                                                                       style="color: #000; top: 18px; left: 450px; font-size: 28px"
                                                                                       aria-hidden="true"></i></button>
        <h3>忘记密码</h3>
        <div>
            <label for="forget_account">手机号：</label>
            <i class="fa fa-mobile" aria-hidden="true"></i>
            <input type="text" id="forget_account" name="forget_account" placeholder="请输入注册时的手机号">
            <span></span>
        </div>

        <div>
            <label for="forget_pwd">新密码：</label>
            <i class="fa fa-key" aria-hidden="true"></i>
            <input type="password" id="forget_pwd" name="forget_pwd" placeholder="请输入密码">
            <span></span>
        </div>

        <div>
            <label for="forget_re_pwd">确认密码：</label>
            <i class="fa fa-key" aria-hidden="true"></i>
            <input type="password" id="forget_re_pwd" name="forget_re_pwd" placeholder="请重复上面输入的密码">
            <span></span>
        </div>

        <div>
            <label for="confirm_code">验证码：</label>
            <input type="text" placeholder="验证码" id="confirm_code" name="confirm_code">
            <button type="button" name="get_code">获取验证码</button>
            <span name="confirm_code_error"></span>
        </div>
        <button type="button" class="btn btn-danger reset">取消</button>
        <button type="button" class="btn btn-success" name="forget_change_pwd">修改</button>
    </div>
</div>

<div id="page">
    <nav class="fh5co-nav" role="navigation">
        <div class="top">
            <div class="container">
                <div class="row">
                    <div class="col-xs-12 text-right">
                        <p class="num">电话: 0561-3199633</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="top-menu">
            <div class="container">
                <div class="row">
                    <div class="col-xs-2">
                        <div id="fh5co-logo"><a href="/index/"><img src="/static/img/logo.png" alt="logo"
                                                                    style="width: 180px"></a></div>
                    </div>
                    <div class="col-xs-10 text-right menu-1">
                        <ul>
                            <li {% if request.path == "/index/" %}class="active"{% endif %}><a href="/index/">首页</a>
                            </li>
                            <li {% if request.path == "/stu_show/" %}class="active"{% endif %}><a
                                    href="/stu_show/">学员成果</a></li>
                            <li {% if request.path == "/class_type/" %}class="active"{% endif %}><a href="/class_type/">课程类型</a>
                            </li>
                            <li {% if request.path == "/Teachers_lineup/" %}class="active"{% endif %}>
                                <a href="/Teachers_lineup/">师资阵容</a>
                            </li>
                            <li {% if request.path == "/contact/" %}class="active"{% endif %}><a
                                    href="/contact/">签名墙</a></li>
                            {#                            <li {% if request.path == "/static/build/index.html" %}class="active"{% endif %}><a#}
                            {#                                    href="/static/build/index.html">Scrach</a></li>#}
                            <li {% if request.path == "/static/build/index.html" %}class="active"{% endif %}><a
                                    href="/static/build/index.html" target="_blank">Scratch</a></li>

                            {% if account %}
                                <li>
                                    {% if role == "student" %}
                                        <span class="user_name">{{ stu_obj.s_name }}</span>
                                    {% endif %}
                                    {% if role == "teacher" %}
                                        <span class="user_name">{{ tea_obj.t_name }}</span>
                                    {% endif %}
                                    <a href="/home/"><span>个人中心</span></a>
                                    <a href="/logout/"><span>退出</span></a>
                                </li>
                            {% else %}
                                <li class="btn-cta btn_login"><a href="#"><span>登录</span></a></li>
                                <li class="btn-cta btn_register"><a href="#"><span>注册</span></a></li>
                            {% endif %}

                        </ul>
                    </div>
                </div>

            </div>
        </div>
    </nav>

    <header id="fh5co-header" class="fh5co-cover" role="banner" style="background-image:url(/static/img/img_bg_1.jpg);"
            data-stellar-background-ratio="0.5">
        <div class="overlay"></div>
        <div class="container">
            <div class="row">
                <div class="col-md-8 col-md-offset-2 text-center">
                    <div class="display-t">
                        <div class="display-tc animate-box" data-animate-effect="fadeIn">
                            <h1>来酷丁编程</h1>
                            <h2>与专业名师面对面
                                一次试听，让孩子爱上编程
                            </h2>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>


    <div id="fh5co-contact">
        <div class="container">
            <div class="panel panel-default">
                <div class="panel-heading" id="my_sign_head">
                    预览部分
                </div>


                <div class="panel-body text-center" id="my_certificate">

                    <canvas id="myCanvas" style="width:300px;height:200px;border: red 1px solid">

                    </canvas>
                </div>
            </div>
            <br>
            <div class="panel panel-default">
                <div class="panel-heading">
                    艺术字体控制台
                </div>
                <form id="form" name="form" method="post">
                    <div class="panel-body row">
                        <div class="form-group col-xs-12 col-sm-12 col-md-12 col-lg-12">
                            <textarea name="text" id="text" class="form-control" row="5"
                                      placeholder="输入文字后，选择字体，点击生成！"></textarea>
                        </div>
                        <div class="form-group col-xs-12 col-sm-6 col-md-3 col-lg-3">
                            <label for="ziti">选择字体：</label>
                            <select name="ziti" id="ziti" class="form-control">
                                <option value="1">草书</option>
                                <option value="2">小奶泡</option>
                                <option value="3">腾祥婀娜体简</option>
                                <option value="4">桃心悦圆</option>
                                <option value="5">小雨滴</option>
                                <option value="6">可爱萌宠体</option>
                                <option value="8">浪花</option>
                                <option value="9">爱心小兔</option>
                                <option value="10">腾祥泡泡体繁</option>
                                <option value="12">甜蜜小女生</option>
                                <option value="13">哈哈呼嘿字</option>
                            </select>
                        </div>

                        <div class="form-group col-xs-12 col-sm-12 col-md-2 col-lg-2">
                            <label>生成签名按钮：</label>
                            <button type="button" id="sub_name" class="btn btn-primary submit form-control"
                                    style="border-radius: 0%;background: lightcoral;color: white;">点击生成签名
                            </button>
                        </div>

                        <div class="form-group col-xs-12 col-sm-12 col-md-2 col-lg-2">
                            <label>生成证书按钮：</label>
                            <button type="button" id="sub_certificate" class="btn btn-primary submit form-control"
                                    style="border-radius: 0%;background: lightcoral;color: white;">点击生成证书
                            </button>
                        </div>

                        <div class="form-group col-xs-12 col-sm-12 col-md-2 col-lg-2">
                            <label>查看证书：</label>
                            <button type="button" id="view_certificate" class="btn btn-primary submit form-control"
                                    style="border-radius: 0%;background: lightcoral;color: white;">点击查看证书
                            </button>
                        </div>

                        <div class="form-group col-xs-12 col-sm-12 col-md-2 col-lg-2">
                            <label>下载证书：</label>
                            <button type="button" id="down_certificate" class="btn btn-primary submit form-control"
                                    style="border-radius: 0%;background: lightcoral;color: white;">点击下载证书
                            </button>
                        </div>

                        <input type="hidden" name="if_demo" id="if_demo_value" value="show">

                    </div>
                </form>
            </div>
            <br>
            <div class="panel panel-default demoListBox">
                <div class="panel-heading">
                    签名合集
                </div>
                <div class="panel-body">

                    <div class="row demolist">
                        {% for certificate in certificate_list %}
                            <div class="col-xs-12 col-sm-4 col-md-4 col-lg-3">
                                <div class="thumbnail text-center">
                                    <img src={{ certificate.c_img_url }} data-toggle="tooltip" data-placement="top"
                                         title=""
                                         data-original-title="">
                                    <div class="caption">
                                        <p class="text-center"><a href="{{ certificate.c_img_url }}"
                                                                  class="btn btn-primary" role="button">查看</a></p>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}





                        <div class="col-xs-12 col-sm-4 col-md-4 col-lg-3">
                            <div class="thumbnail text-center">
                                <img src="img/demo/97.png" data-toggle="tooltip" data-placement="top" title=""
                                     data-original-title="腾祥嘉丽细圆简">
                                <div class="caption">
                                    <p class="text-center"><a href="/97" class="btn btn-primary" role="button">查看</a> <a
                                            href="javascript:void(0);" class="btn btn-default setfont" data-id="97"
                                            role="button">选用</a></p>
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-4 col-md-4 col-lg-3">
                            <div class="thumbnail text-center">
                                <img src="img/demo/99.png" data-toggle="tooltip" data-placement="top" title=""
                                     data-original-title="胭脂连体">
                                <div class="caption">
                                    <p class="text-center"><a href="/99" class="btn btn-primary" role="button">查看</a> <a
                                            href="javascript:void(0);" class="btn btn-default setfont" data-id="99"
                                            role="button">选用</a></p>
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-4 col-md-4 col-lg-3">
                            <div class="thumbnail text-center">
                                <img src="img/demo/100.png" data-toggle="tooltip" data-placement="top" title=""
                                     data-original-title="腾祥金砖黑简体">
                                <div class="caption">
                                    <p class="text-center"><a href="/100" class="btn btn-primary" role="button">查看</a>
                                        <a href="javascript:void(0);" class="btn btn-default setfont" data-id="100"
                                           role="button">选用</a></p>
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-4 col-md-4 col-lg-3">
                            <div class="thumbnail text-center">
                                <img src="img/demo/101.png" data-toggle="tooltip" data-placement="top" title=""
                                     data-original-title="腾祥孔淼石头简体">
                                <div class="caption">
                                    <p class="text-center"><a href="/101" class="btn btn-primary" role="button">查看</a>
                                        <a href="javascript:void(0);" class="btn btn-default setfont" data-id="101"
                                           role="button">选用</a></p>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <div class="text-center" style="margin-bottom: 25px">
                    <a href="/sign_list/" class="btn btn-primary" role="button" target="_blank">查看所有签名</a>
                </div>
            </div>
        </div>
    </div>

    <!--这里是kuding信息公司的声明部分-->
    <!--这里是kuding信息公司的声明部分-->
    <div class="footer-section">
        <div class="container">
            <div class="footer-grids">
                <div class="col-md-5 footer-grid wow fadeInDownBig animated animated" data-wow-delay=".5s"
                     style="visibility: visible; animation-delay: 0.5s; animation-name: fadeInDownBig;">
                    <h4>公司产品</h4>
                    <p>Noip课程</p>
                    <p>Python课程</p>
                    <p>Java课程</p>
                    <p>Scratch课程</p>
                </div>
                <div class="col-md-4 footer-grid wow fadeInRight animated animated" data-wow-delay=".5s"
                     style="visibility: visible; animation-delay: 0.5s; animation-name: fadeInRight;">
                    <h4>联系我们</h4>
                    <p style="padding-top: 10px">源创客 五号楼 六层</p>
                    <p>淮北市相山区濉溪路265号</p>
                    <p>联系电话: 0561-3199633</p>
                    <a href="mailto:794384313@qq.com" style="color: #333;">794384313@qq.com</a>
                </div>
                <div class="col-md-3 footer-grid wow fadeInUpBig animated animated" data-wow-delay=".5s"
                     style="visibility: visible; animation-delay: 0.5s; animation-name: fadeInUpBig;">
                    <h4>微信公众号</h4>
                    <img style="height: 120px;width: 120px;padding-top: 10px" src="/static/img/weixin.jpg">
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
    </div>


    <div class="gototop js-top">
        <a href="#" class="js-gotop"><i class="icon-arrow-up"></i></a>
    </div>

</div>

<!-- jQuery -->
<script src="/static/js/jquery.min.js"></script>
<!-- jQuery Easing -->
<script src="/static/js/jquery.easing.1.3.js"></script>
<!-- Bootstrap -->
<script src="/static/plug/bootstrap/js/bootstrap.min.js"></script>
<!-- Waypoints -->
<script src="/static/js/jquery.waypoints.min.js"></script>
<!-- Stellar Parallax -->
<script src="/static/js/jquery.stellar.min.js"></script>
<!-- Carousel -->
<script src="/static/js/owl.carousel.min.js"></script>
<!-- countTo -->
<script src="/static/js/jquery.countTo.js"></script>
<!-- Magnific Popup -->
<script src="/static/js/jquery.magnific-popup.min.js"></script>
<script src="/static/js/magnific-popup-options.js"></script>
<!-- Main -->
<script src="/static/js/main.js"></script>
<!-- layer-->
<script type="text/javascript" src="/static/laypage/1.2/laypage.js"></script>
<script type="text/javascript" src="/static/layer/2.4/layer.js"></script>

<script>


    // 找到头像的input标签绑定change事件
    $("#id_avatar").change(function () {
        // 1. 创建一个读取文件的对象
        var fileReader = new FileReader();
        // 取到当前选中的头像文件
        // console.log(this.files[0]);
        // 读取你选中的那个文件
        fileReader.readAsDataURL(this.files[0]);  // 读取文件是需要时间的
        fileReader.onload = function () {
            // 2. 等上一步读完文件之后才 把图片加载到img标签中
            $("#avatar-img").attr("src", fileReader.result);
        };
    });

    // 验证码倒计时
    var code;
    var t = 60;
    var account;
    $('.getmessage').click(function () {
        account = $("#id_account").val();
        {#console.log(account);#}
        $.ajax({
            url: '/verify_code/',
            type: "post",
            data: {
                account: account,
                csrfmiddlewaretoken: $("[name='csrfmiddlewaretoken']").val()
            },
            success: function (data) {
                if (data.status == 1) {
                    code = data.code;
                    account = data.account;
                    $(".getmessage").attr('disabled', true);
                    // 倒计时60s
                    var t = 60;
                    var i = setInterval(function () {
                        t--;
                        if (t > 0)
                            $('.getmessage').text(t + '秒后刷新重试');
                        else {
                            $('.getmessage').text('获取登陆密码');
                            $('.getmessage').removeAttr('disabled');
                            clearInterval(i);
                        }
                    }, 1000);
                } else {
                    $("#id_account").next("span").html(data.error);
                    setTimeout(function () {
                        $("#id_account").next("span").html("");
                    }, 3000);
                }
            }
        });
    });


    //忘记密码倒计时
    $("[name='get_code']").click(function () {
        var forget_account = $("[name='forget_account']").val();
        {#console.log(account);#}
        if (forget_account.length == 0) {
            $("[name='forget_account']").next("span").html("手机号不能为空！");
            setTimeout(function () {
                $("[name='forget_account']").next("span").html("");
            }, 3000);
        } else {
            $.ajax({
                url: '/get_code/',
                type: "post",
                data: {
                    account: forget_account,
                    csrfmiddlewaretoken: $("[name='csrfmiddlewaretoken']").val()
                },
                success: function (data) {
                    {#console.log(data);#}
                    if (data.status == 0) {
                        code = data.code;
                        account = data.account;
                        $("[name='get_code']").attr('disabled', true);
                        // 倒计时60s
                        var t = 60;
                        var i = setInterval(function () {
                            t--;
                            if (t > 0) {
                                $("[name='get_code']").text(t + '秒后重试');
                            } else {
                                $("[name='get_code']").text('获取登陆密码');
                                $("[name='get_code']").removeAttr('disabled');
                                clearInterval(i);
                            }
                        }, 1000);
                    } else {
                        $("[name='forget_account']").next("span").html(data.error);
                        setTimeout(function () {
                            $("[name='forget_account']").next("span").html("");
                        }, 3000);
                    }
                }
            })
        }
    });
    //忘记密码 验证码失去焦点验证
    //验证码失去焦点时验证
    $("[name='confirm_code']").blur(function () {
        var code1 = $("[name='confirm_code']").val();
        var account1 = $("[name='forget_account']").val();
        {#console.log(code1);#}
        {#console.log(account1);#}
        {#console.log(code);#}
        {#console.log(account);#}

        if (code1 == code && account1 == account) {

            $(".erro-check").html("验证成功！");
            setTimeout(function () {
                $("[name='confirm_code_error']").html("");
            }, 3000);
        } else {
            $("[name='confirm_code_error']").html("验证码不正确！");
            setTimeout(function () {
                $("[name='confirm_code_error']").html("");
            }, 3000);
        }
    });


    //忘记密码验证
    $("[name='forget_change_pwd']").click(function () {
        var forget_account = $("[name='forget_account']").val();
        var forget_pwd = $("[name='forget_pwd']").val();
        var forget_re_pwd = $("[name='forget_re_pwd']").val();
        {#console.log(forget_pwd);#}
        {#console.log(forget_re_pwd);#}
        if (forget_pwd.length == 0) {
            $("[name='forget_pwd']").next("span").html("密码不能为空！");
            setTimeout(function () {
                $("[name='forget_pwd']").next("span").html("");
            }, 3000);
        } else {
            if (forget_pwd.length < 6) {
                $("[name='forget_pwd']").next("span").html("密码不能低于6位！");
                setTimeout(function () {
                    $("[name='forget_pwd']").next("span").html("");
                }, 3000);
            } else {
                if (forget_re_pwd.length == 0) {
                    $("[name='forget_pwd']").next("span").html("确认密码不能为空！");
                    setTimeout(function () {
                        $("[name='forget_pwd']").next("span").html("");
                    }, 3000);
                } else {
                    if (forget_pwd.length < 6) {
                        $("[name='forget_re_pwd']").next("span").html("确认密码不能低于6位！");
                        setTimeout(function () {
                            $("[name='forget_pwd']").next("span").html("");
                        }, 3000);
                    } else {
                        if (forget_pwd != forget_re_pwd) {
                            $("[name='forget_re_pwd']").next("span").html("两次密码输入不同，请重新输入！");
                            setTimeout(function () {
                                $("[name='forget_re_pwd']").next("span").html("");
                            }, 3000);
                        } else {
                            $.ajax({
                                url: '/change_pwd/',
                                type: "post",
                                data: {
                                    account: forget_account,
                                    pwd: forget_pwd,
                                    csrfmiddlewaretoken: $("[name='csrfmiddlewaretoken']").val()
                                },
                                success: function (data) {
                                    if (data.status) {
                                        alert("密码修改成功！");
                                        location.href = data.href
                                    }
                                }
                            })

                        }
                    }
                }
            }
        }
    });


    //验证码失去焦点时验证
    $(".message-check").blur(function () {
        var code1 = $(".message-check").val();
        var account1 = $("#id_account").val();
        //console.log(code1);
        //console.log(account1);
        //console.log(code);
        //console.log(account);

        if (code1 == code && account1 == account) {

            $(".erro-check").html("验证成功！");
            setTimeout(function () {
                $(".erro-check").html("");
            }, 3000);
        } else {
            $(".erro-check").html("验证码不正确！");
            setTimeout(function () {
                $(".erro-check").html("");
            }, 3000);
        }
    });

    //注册验证
    $("[name='reg']").click(function () {
        var code1 = $(".message-check").val();
        var account1 = $("#id_account").val();
        //console.log(code1);
        //console.log(account1);
        //console.log(code);
        //console.log(account);
        var formData = new FormData();
        formData.append("name", $("#id_name").val());
        formData.append("password", $("#id_password").val());
        formData.append("re_password", $("#id_re_password").val());
        formData.append("account", $("#id_account").val());
        formData.append("avatar", $("#id_avatar")[0].files[0]);
        formData.append("csrfmiddlewaretoken", $("[name='csrfmiddlewaretoken']").val());
        $.ajax({
            url: "/reg/",
            type: "post",
            processData: false,
            contentType: false,
            data: formData,
            success: function (data) {
                if (data.status == 0) {
                    // 有错误就展示错误
                    {#// console.log(data.msg);#}
                    // 将报错信息填写到页面上
                    $.each(data.msg, function (k, v) {
                        // console.log("id_"+k, v[0]);
                        // console.log($("#id_"+k));
                        $("#id_" + k).next("span").text(v[0]);
                        setTimeout(function () {
                            $("#id_" + k).next("span").html("");
                        }, 3000);
                    })
                } else {
                    alert("恭喜您，注册成功！");
                    location.reload()
                }
            }
        })
    });

    //登陆验证
    $("#login").click(function () {
        var log_account = $("#id_log_account").val();
        var log_password = $("#id_log_password").val();
        var log_role = $("[name='log_role']:checked").val();
        {#console.log(log_account);#}
        {#console.log(log_password);#}
        {#console.log(log_role);#}
        $.ajax({
            url: "/login/",
            type: "post",
            data: {
                log_account: log_account,
                log_password: log_password,
                log_role: log_role,
                csrfmiddlewaretoken: $("[name='csrfmiddlewaretoken']").val()
            },
            success: function (data) {
                if (data.status == 0) {
                    $.each(data.msg, function (k, v) {
                        {#console.log("id_" + k, v[0]);#}
                        {#console.log($("#id_" + k));#}
                        $("#id_" + k).parents().next("span").html(v[0]);
                        setTimeout(function () {
                            $("#id_" + k).parents().next("span").html("");
                        }, 3000);
                    })
                } else if (data.status == 1) {
                    location.href = data.msg;
                } else if (data.status == 3) {
                    $(".notice-erro").html(data.msg);
                    setTimeout(function () {
                        $(".notice-erro").html("");
                    }, 3000);
                } else if (data.status == 4) {
                    $(".notice-erro").html(data.msg);
                    setTimeout(function () {
                        $(".notice-erro").html("");
                    }, 3000);
                }
            }
        })
    });


    // 将所有的input框绑定获取焦点的事件，将所有的错误信息清空
    $("form input").focus(function () {
        $(this).next().html("");
    });


    $("#sub_name").click(function () {
        var user_name = $("[name='text']").val();
        var zt = $("#ziti option:selected").html();
        console.log(zt);
        if (user_name == "") {
            layer.msg("您还未输入内容，不能生成，抱歉！");
        } else if (user_name.length > 4) {
            console.log(user_name, ">4");
            $("#my_sign_head").html("如果满意，请点击生成证书按钮，方便您生成编程一小时证书。");
            getImg(user_name, 60, zt);
        } else if (user_name.length < 5 && user_name.length > 2) {
            console.log(user_name, "3,4");
            $("#my_sign_head").html("如果满意，请点击生成证书按钮，方便您生成编程一小时证书。");
            getImg(user_name, 90, zt);
        } else if (user_name.length == 2) {
            var user_name = user_name.replace(/(.{1})/g, '$1  ');
            $("#my_sign_head").html("如果满意，请点击生成证书按钮，方便您生成编程一小时证书。");
            console.log(user_name, "2");
            getImg(user_name, 90, zt);
        }
        ;


    });


    function getImg(text, fsz, zt) {
        if ($("#myCanvas").hasClass("hidden")) {
            $("#myCanvas").removeClass("hidden");
            $("#my_certificate_img").remove();
            var c = document.getElementById("myCanvas");
            var cxt = c.getContext("2d");
            var img = new Image();
            img.src = '/static/img/bg_for_sign.png';
            img.onload = function () {//图片加载完成，才可处理
                cxt.clearRect(0, 0, 300, 200);
                cxt.back
                cxt.drawImage(img, 0, 0, 300, 200, 0, 0, 300, 200);
                cxt.save();
                cxt.font = fsz + "px " + zt;
                cxt.textBaseline = 'middle';//更改字号后，必须重置对齐方式，否则居中麻烦。设置文本的垂直对齐方式
                cxt.textAlign = 'center';
                var tw = cxt.measureText(text).width;
                var ftop = c.height / 2;
                var fleft = c.width / 2;
                cxt.fillStyle = "rgba(225,225,225,0)";
                cxt.fillRect(fleft - tw / 2, ftop - fsz / 2, tw, fsz);//矩形在画布居中方式
                cxt.fillStyle = "black";
                cxt.fillText(text, fleft, ftop);//文本元素在画布居中方式
                var url = c.toDataURL('image/png', 1.0);
                $.ajax({
                    url: "/save_img/",
                    type: "post",
                    data: {
                        name: text,
                        zt: zt,
                        img_url: url,
                        csrfmiddlewaretoken: $("[name='csrfmiddlewaretoken']").val()
                    },
                    success: function (data) {
                        console.log(data);
                    }
                })

            };
        } else {
            var c = document.getElementById("myCanvas");
            var cxt = c.getContext("2d");
            var img = new Image();
            img.src = '/static/img/bg_for_sign.png';
            img.onload = function () {//图片加载完成，才可处理
                cxt.clearRect(0, 0, 300, 200);
                cxt.drawImage(img, 0, 0, 300, 200, 0, 0, 300, 200);
                cxt.save();
                cxt.font = fsz + "px " + zt;
                cxt.textBaseline = 'middle';//更改字号后，必须重置对齐方式，否则居中麻烦。设置文本的垂直对齐方式
                cxt.textAlign = 'center';
                var tw = cxt.measureText(text).width;
                var ftop = c.height / 2;
                var fleft = c.width / 2;
                cxt.fillStyle = "rgba(225,225,225,0)";
                cxt.fillRect(fleft - tw / 2, ftop - fsz / 2, tw, fsz);//矩形在画布居中方式
                cxt.fillStyle = "black";
                cxt.fillText(text, fleft, ftop);//文本元素在画布居中方式
                //cxt.strokeStyle = 'yellow';
                //cxt.strokeText(text,fleft,ftop);//文字边框
                var url = c.toDataURL('image/png', 1.0);
                $.ajax({
                    url: "/save_img/",
                    type: "post",
                    data: {
                        name: text,
                        zt: zt,
                        img_url: url,
                        csrfmiddlewaretoken: $("[name='csrfmiddlewaretoken']").val()
                    },
                    success: function (data) {
                        console.log(data);
                    }
                })


            };


        }

    };

    $("#sub_certificate").click(function () {

        if ($("#my_certificate_img").length > 0) {
            $("#my_certificate_img").remove();
            var img = "<img id='my_certificate_img' src='/static/img/bg.jpg' style='width: 200px;height: 200px;'>";
            $("#myCanvas").addClass("hidden");
            $("#my_certificate").append(img);
        } else {
            var img = "<img id='my_certificate_img' src='/static/img/bg.jpg' style='width: 200px;height: 200px;'>";
            $("#myCanvas").addClass("hidden");
            $("#my_certificate").append(img);
        }
    });

    $("#view_certificate").click(function () {
        if ($("#my_certificate_img").length > 0) {
            var newWeb = window.open('_blank');
            newWeb.location = $("#my_certificate_img").attr("src");
        } else {
            layer.msg("尚未生成证书，不能查看，请先生成证书！")
        }

    });


</script>
</body>
</html>

