<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>
        {% block title %}

        {% endblock %}
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="在线一对一少儿编程"/>
    <style type="text/css">
        .footer-section {
            background-color: #099ecb;
            margin-top: 500px;
            padding-top: 50px;
        }

        .footer-section .container p, .footer-section .container li {
            color: #333;
        }

        .footer-section .container p {
            margin-bottom: 0px;
        }
    </style>
    <link rel="shortcut icon" href="/static/img/kuding.ico">
    <!--font awesome图标引用地址-->
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">
    <!-- Animate.css -->
    <link rel="stylesheet" href="/static/css/animate.css">
    <!-- Icomoon Icon Fonts-->
    <link rel="stylesheet" href="/static/css/icomoon.css">
    <!-- Bootstrap  -->
    <link rel="stylesheet" href="/static/plug/bootstrap/css/bootstrap.css">

    <!-- Magnific Popup -->
    <link rel="stylesheet" href="/static/css/magnific-popup.css">

    <!-- Owl Carousel  -->
    <link rel="stylesheet" href="/static/css/owl.carousel.min.css">
    <link rel="stylesheet" href="/static/css/owl.theme.default.min.css">

    <!-- Theme style  -->
    <link rel="stylesheet" href="/static/css/z_style.css">

    <!-- Modernizr JS -->
    <script src="/static/js/modernizr-2.6.2.min.js"></script>
    <script src="/static/js/respond.min.js"></script>
    <script>

    </script>
</head>
<body>
<!--这里是模态框的内容-->

<!-- 登陆 -->
<div class="motai_con fadeIn ">
    <div class="modal_data fadeIn">
        <h3>登陆</h3>
        <form action="" method="post">
            <div class="info">{% csrf_token %}</div>
            <div>
                {#                    <label>账号</label>#}
                <i class="fa fa-user" aria-hidden="true"></i>
                {{ loginForm.log_account }}
                {#                    <input name="account" autofocus type="text" placeholder="请输入手机号">#}
            </div>
            <span class="notice-erro">{{ loginForm.log_account.errors.0 }}</span><br>
            <div>
                {#                    <label>账号</label>#}
                <i class="fa fa-key" aria-hidden="true"></i>
                {{ loginForm.log_password }}
                {#                    <input name="account" autofocus type="text" placeholder="请输入手机号">#}
            </div>
            <span class="notice-erro">{{ loginForm.log_password.errors.0 }}</span><br>
            {#                <div class="identify">#}
            {#					<label style="color: white"><input type="radio" name="role" value="student" >学生</label>#}
            {#					<label style="color: white"><input type="radio"   name="role" value="teacher">老师</label>#}
            {#                </div>#}

            {#                <div><label>账号</label><i class="fa fa-user" aria-hidden="true"></i><input name="account" autofocus type="text" placeholder="请输入手机号"></div>#}
            {#				<span class="notice-erro" ></span><br>#}
            {#				<div><label>密码</label><i class="fa fa-key" aria-hidden="true"></i><input name="password" type="password" placeholder="请输入密码"></div>#}
            <div class="identify">
                {{ loginForm.log_role }}
                <div style="clear:both"></div>
            </div>
            <button type="button" class="btn btn-primary">取消</button>
            <button type="button" id="login" class="btn btn-success">登陆</button>
            <a href="#" id="forget_btn">忘记密码</a>
        </form>
    </div>

    <!-- 注册 -->
    <div class="mod-register">
        <h3>注册</h3>
        <form action="" novalidate method="post">
            <div class="info">{% csrf_token %}</div>

            <div>
                {#                    <label for="{{ reg.name.id_for_label }}">{{ reg.name.label }}</label>#}
                <i class="fa fa-user" aria-hidden="true"></i>
                {{ reg.name }} <span>{{ reg.name.errors.0 }}</span><br>
            </div>
            <div>
                {#                    <label for="{{ reg.password.id_for_label }}">{{ reg.password.label }}</label>#}
                <i class="fa fa-key" aria-hidden="true"></i>
                {{ reg.password }} <span>{{ reg.password.errors.0 }}</span><br>
            </div>
            <div>
                {#                    <label for="{{ reg.re_password.id_for_label }}">{{ reg.re_password.label }}</label>#}
                <i class="fa fa-key" aria-hidden="true"></i>
                {{ reg.re_password }} <span>{{ reg.re_password.errors.0 }}</span><br>
            </div>
            <div>
                {#                    <label for="{{ reg.account.id_for_label }}">{{ reg.account.label }}</label>#}
                <i class="fa fa-mobile" aria-hidden="true"></i>
                {{ reg.account }} <span>{{ reg.account.errors.0 }}</span><br>
            </div>
            <input type="text" placeholder="验证码" class="message-check">
            <button type="button" class="getmessage">获取验证码</button>
            <br>
            <span class="erro-check"></span><br>
            <div class="mod_reg">
                <button type="button" name="reset" class="btn btn-primary">取消</button>
                <button type="button" name="reg" class="btn btn-success">注册</button>
            </div>
        </form>
    </div>

    <!-- 找回密码 -->
    <div class="forget_pwd">
        <h3>忘记密码</h3>

        <div>
            <i class="fa fa-mobile" aria-hidden="true"></i>
            <input type="text" name="forget_account" placeholder="请输入注册时的手机号">
            <span></span>
        </div>

        <div>
            <i class="fa fa-key" aria-hidden="true"></i>
            <input type="password" name="forget_pwd" placeholder="请输入密码">
            <span></span>
        </div>

        <div>
            <i class="fa fa-key" aria-hidden="true"></i>
            <input type="password" name="forget_re_pwd" placeholder="请重复上面输入的密码">
            <span></span>
        </div>

        <div><input type="text" placeholder="验证码" name="confirm_code">
            <button type="button" name="get_code">获取验证码</button>
            <span name="confirm_code_error"></span>
        </div>
        <button type="button" class="btn btn-danger reset">取消</button>
        <button type="button" class="btn btn-success" name="forget_change_pwd">修改</button>
    </div>
</div>

<div id="page">
    <nav class="fh5co-nav" role="navigation">
        <div class="top">
            <div class="container">
                <div class="row">
                    <div class="col-xs-12 text-right">
                        <p class="num">电话: xxx xxxx xxxx</p>
                        <!--	<ul class="fh5co-social">
                                <li><a href="#"><i class="icon-twitter"></i></a></li>
                                <li><a href="#"><i class="icon-dribbble"></i></a></li>
                                <li><a href="#"><i class="icon-github"></i></a></li>
                            </ul>-->
                    </div>
                </div>
            </div>
        </div>
        <div class="top-menu">
            <div class="container">
                <div class="row">
                    <div class="col-xs-2">
                        <div id="fh5co-logo"><a href="/index/"><img src="/static/img/logo.png" alt="logo"
                                                                    style="width: 180px"></a></div>
                    </div>
                    <div class="col-xs-10 text-right menu-1">
                        <ul>
                            <li {% if request.path == "/index/" %}class="active"{% endif %}><a href="/index/">首页</a>
                            </li>
                            <li {% if request.path == "/stu_show/" %}class="active"{% endif %}><a
                                    href="/stu_show/">学员风采</a></li>
                            <li {% if request.path == "/class_type/" %}class="active"{% endif %}><a href="/class_type/">课程类型</a>
                            </li>
                            <li {% if request.path == "/Teachers_lineup/" %}class="active"{% endif %}>
                                <a href="/Teachers_lineup/">师资阵容</a>
                            </li>
                            <li {% if request.path == "/contact/" %}class="active"{% endif %}><a
                                    href="/contact/">联系我们</a></li>
                            <li {% if request.path == "#" %}class="active"{% endif %}><a
                                    href="#">Scrach</a></li>

                            {% if account %}
                                {% if role == "student" %}
                                    <span class="user_name">{{ stu_obj.s_name }}</span>
                                {% endif %}
                                {% if role == "teacher" %}
                                    <span class="user_name">{{ tea_obj.t_name }}</span>
                                {% endif %}
                                <a href="/home/"><span>个人中心</span></a>
                                <a href="/logout/"><span>退出</span></a>
                            {% else %}
                                <li class="btn-cta"><a href="#"><span>登陆</span></a></li>
                                <li class="btn-cta"><a href="#"><span>注册</span></a></li>
                            {% endif %}
                        </ul>
                    </div>
                </div>

            </div>
        </div>
    </nav>

    <header id="fh5co-header" class="fh5co-cover" role="banner" style="background-image:url(/static/img/img_bg_1.jpg);"
            data-stellar-background-ratio="0.5">
        <div class="overlay"></div>
        <div class="container">
            <div class="row">
                <div class="col-md-8 col-md-offset-2 text-center">
                    <div class="display-t">
                        <div class="display-tc animate-box" data-animate-effect="fadeIn">
                            <h1>编程赋予孩子改变世界的能力</h1>
                            <h2>未来的竞争，是创造力与逻辑思维的竞争。
                                就像比尔盖茨、乔布斯、埃隆马斯克这些时代大咖，并非他们的竞争力天生就高人一等</h2>
                            <p><a class="btn btn-primary btn-lg btn-learn" href="#">参加课程</a> <a
                                    class="btn btn-primary btn-lg popup-vimeo btn-video"
                                    href="https://vimeo.com/channels/staffpicks/93951774"><i class="icon-play"></i> 观看视频</a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>


    {% block article %}


    {% endblock %}




    <div id="fh5co-started" style="background-image:url(/static/img/img_bg_2.jpg);">
        <div class="overlay"></div>
        <div class="container">
            <div class="row animate-box">
                <div class="col-md-8 col-md-offset-2 text-center fh5co-heading">
                    <h2>让我们开始编程学习吧</h2>
                    <p>现在报名有更多惊喜优惠哦！</p>
                </div>
            </div>
            <div class="row animate-box">
                <div class="col-md-8 col-md-offset-2 text-center">
                    <p><a href="#" class="btn btn-default btn-lg">开始免费的课程</a></p>
                </div>
            </div>
        </div>
    </div>

    <!--这里是麒麟信息公司的声明部分-->
    <div class="footer-section">
        <div class="container">
            <div class="footer-grids">
                <div class="col-md-3 footer-grid wow fadeInRight animated animated" data-wow-delay=".5s"
                     style="visibility: visible; animation-delay: 0.5s; animation-name: fadeInRight;">
                    <h4>解决方案</h4>
                    <ul>
                        <li>智 慧 水 务</li>
                        <li>智 慧 城 市</li>
                        <li>智 慧 医 疗</li>
                        <li>智 慧 工 业</li>
                    </ul>
                </div>
                <div class="col-md-3 footer-grid wow fadeInDownBig animated animated" data-wow-delay=".5s"
                     style="visibility: visible; animation-delay: 0.5s; animation-name: fadeInDownBig;">
                    <h4>公司产品</h4>

                    <p>麒麟足球平台</p>
                    <p>服务于双创的创新创业云平台</p>
                    <p>麒麟医疗平台</p>
                    <p>基于GIS 的市政业务管理系统</p>
                    <p>麒麟工业生产信息化管理系统</p>
                    <p>防汛抗旱管理系统</p>

                </div>
                <div class="col-md-3 footer-grid wow fadeInRight animated animated" data-wow-delay=".5s"
                     style="visibility: visible; animation-delay: 0.5s; animation-name: fadeInRight;">
                    <h4>联系我们</h4>
                    <p style="padding-top: 10px">源创客 五号楼 六层</p>
                    <p>淮北市相山区濉溪路265号</p>
                    <p>联系电话: +86 158-5610-9425</p>
                    <a href="mailto:794384313@qq.com" style="color: #333;">794384313@qq.com</a>
                </div>
                <div class="col-md-3 footer-grid wow fadeInUpBig animated animated" data-wow-delay=".5s"
                     style="visibility: visible; animation-delay: 0.5s; animation-name: fadeInUpBig;">
                    <h4>微信公众号</h4>
                    <img style="height: 120px;width: 120px;padding-top: 10px" src="/static/img/ercode.jpg">
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
    </div>


    <div class="gototop js-top">
        <a href="#" class="js-gotop"><i class="icon-arrow-up"></i></a>
    </div>
</div>

<!-- jQuery -->
<script src="/static/js/jquery.min.js"></script>
<!-- jQuery Easing -->
<script src="/static/js/jquery.easing.1.3.js"></script>
<!-- Bootstrap -->
<script src="/static/plug/bootstrap/js/bootstrap.min.js"></script>
<!-- Waypoints -->
<script src="/static/js/jquery.waypoints.min.js"></script>
<!-- Stellar Parallax -->
<script src="/static/js/jquery.stellar.min.js"></script>
<!-- Carousel -->
<script src="/static/js/owl.carousel.min.js"></script>
<!-- countTo -->
<script src="/static/js/jquery.countTo.js"></script>
<!-- Magnific Popup -->
<script src="/static/js/jquery.magnific-popup.min.js"></script>
<script src="/static/js/magnific-popup-options.js"></script>
<!-- Main -->
<script src="/static/js/main.js"></script>
<script>
    // 验证码倒计时
    var code;
    var t = 60;
    var account;
    $('.getmessage').click(function () {
        account = $("#id_account").val();
        {#console.log(account);#}
        $.ajax({
            url: '/verify_code/',
            type: "post",
            data: {
                account: account,
                csrfmiddlewaretoken: $("[name='csrfmiddlewaretoken']").val()
            },
            success: function (data) {
                if (data.status == 1) {
                    code = data.code;
                    account = data.account;
                    $(".getmessage").attr('disabled', true);
                    // 倒计时60s
                    var t = 60;
                    var i = setInterval(function () {
                        t--;
                        if (t > 0)
                            $('.getmessage').text(t + '秒后刷新重试');
                        else {
                            $('.getmessage').text('获取登陆密码');
                            $('.getmessage').removeAttr('disabled');
                            clearInterval(i);
                        }
                    }, 1000);
                } else {
                    $("#id_account").next("span").html(data.error);
                    setTimeout(function () {
                        $("#id_account").next("span").html("");
                    }, 3000);
                }
            }
        });
    });


    //忘记密码倒计时
    $("[name='get_code']").click(function () {
        var forget_account = $("[name='forget_account']").val();
        {#console.log(account);#}
        if (forget_account.length == 0) {
            $("[name='forget_account']").next("span").html("手机号不能为空！");
            setTimeout(function () {
                $("[name='forget_account']").next("span").html("");
            }, 3000);
        } else {
            $.ajax({
            url: '/get_code/',
            type: "post",
            data: {
                account: forget_account,
                csrfmiddlewaretoken: $("[name='csrfmiddlewaretoken']").val()
            },
            success: function (data) {
                {#console.log(data);#}
                if (data.status == 0) {
                    code = data.code;
                    account = data.account;
                    $("[name='get_code']").attr('disabled', true);
                    // 倒计时60s
                    var t = 60;
                    var i = setInterval(function () {
                        t--;
                        if (t > 0) {
                            $("[name='get_code']").text(t + '秒后重试');
                        } else {
                            $("[name='get_code']").text('获取登陆密码');
                            $("[name='get_code']").removeAttr('disabled');
                            clearInterval(i);
                        }
                    }, 1000);
                } else {
                    $("[name='forget_account']").next("span").html(data.error);
                    setTimeout(function () {
                        $("[name='forget_account']").next("span").html("");
                    }, 3000);
                }
            }
        })
        }
    });
    //忘记密码 验证码失去焦点验证
    //验证码失去焦点时验证
    $("[name='confirm_code']").blur(function () {
        var code1 = $("[name='confirm_code']").val();
        var account1 = $("[name='forget_account']").val();
        {#console.log(code1);#}
        {#console.log(account1);#}
        {#console.log(code);#}
        {#console.log(account);#}

        if (code1 == code && account1 == account) {

            $(".erro-check").html("验证成功！");
            setTimeout(function () {
                $("[name='confirm_code_error']").html("");
            }, 3000);
        } else {
            $("[name='confirm_code_error']").html("验证码不正确！");
            setTimeout(function () {
                $("[name='confirm_code_error']").html("");
            }, 3000);
        }
    });


    //忘记密码验证
    $("[name='forget_change_pwd']").click(function () {
        var forget_account = $("[name='forget_account']").val();
        var forget_pwd = $("[name='forget_pwd']").val();
        var forget_re_pwd = $("[name='forget_re_pwd']").val();
        {#console.log(forget_pwd);#}
        {#console.log(forget_re_pwd);#}
        if (forget_pwd.length == 0) {
            $("[name='forget_pwd']").next("span").html("密码不能为空！");
            setTimeout(function () {
                $("[name='forget_pwd']").next("span").html("");
            }, 3000);
        } else {
            if (forget_pwd.length < 6) {
                $("[name='forget_pwd']").next("span").html("密码不能低于6位！");
                setTimeout(function () {
                    $("[name='forget_pwd']").next("span").html("");
                }, 3000);
            } else {
                if (forget_re_pwd.length == 0) {
                    $("[name='forget_pwd']").next("span").html("确认密码不能为空！");
                    setTimeout(function () {
                        $("[name='forget_pwd']").next("span").html("");
                    }, 3000);
                } else {
                    if (forget_pwd.length < 6) {
                        $("[name='forget_re_pwd']").next("span").html("确认密码不能低于6位！");
                        setTimeout(function () {
                            $("[name='forget_pwd']").next("span").html("");
                        }, 3000);
                    } else {
                        if (forget_pwd != forget_re_pwd) {
                            $("[name='forget_re_pwd']").next("span").html("两次密码输入不同，请重新输入！");
                            setTimeout(function () {
                                $("[name='forget_re_pwd']").next("span").html("");
                            }, 3000);
                        } else {
                            $.ajax({
                                url: '/change_pwd/',
                                type: "post",
                                data: {
                                    account: forget_account,
                                    pwd: forget_pwd,
                                    csrfmiddlewaretoken: $("[name='csrfmiddlewaretoken']").val()
                                },
                                success: function (data) {
                                    if (data.status) {
                                        location.href = data.href
                                    }
                                }
                            })

                        }
                    }
                }
            }
        }
    });


    //验证码失去焦点时验证
    $(".message-check").blur(function () {
        var code1 = $(".message-check").val();
        var account1 = $("#id_account").val();
        //console.log(code1);
        //console.log(account1);
        //console.log(code);
        //console.log(account);

        if (code1 == code && account1 == account) {

            $(".erro-check").html("验证成功！");
            setTimeout(function () {
                $(".erro-check").html("");
            }, 3000);
        } else {
            $(".erro-check").html("验证码不正确！");
            setTimeout(function () {
                $(".erro-check").html("");
            }, 3000);
        }
    });

    //注册验证
    $("[name='reg']").click(function () {
        var code1 = $(".message-check").val();
        var account1 = $("#id_account").val();
        //console.log(code1);
        //console.log(account1);
        //console.log(code);
        //console.log(account);
        var formData = new FormData();
        formData.append("name", $("#id_name").val());
        formData.append("password", $("#id_password").val());
        formData.append("re_password", $("#id_re_password").val());
        formData.append("account", $("#id_account").val());
        formData.append("csrfmiddlewaretoken", $("[name='csrfmiddlewaretoken']").val());
        $.ajax({
            url: "/reg/",
            type: "post",
            processData: false,
            contentType: false,
            data: formData,
            success: function (data) {
                if (data.status == 0) {
                    // 有错误就展示错误
                    {#// console.log(data.msg);#}
                    // 将报错信息填写到页面上
                    $.each(data.msg, function (k, v) {
                        // console.log("id_"+k, v[0]);
                        // console.log($("#id_"+k));
                        $("#id_" + k).next("span").text(v[0]);
                        setTimeout(function () {
                            $("#id_" + k).next("span").html("");
                        }, 3000);
                    })
                }
            }
        })
    });

    //登陆验证
    $("#login").click(function () {
        var log_account = $("#id_log_account").val();
        var log_password = $("#id_log_password").val();
        var log_role = $("[name='log_role']:checked").val();
        {#console.log(log_account);#}
        {#console.log(log_password);#}
        {#console.log(log_role);#}
        $.ajax({
            url: "/login/",
            type: "post",
            data: {
                log_account: log_account,
                log_password: log_password,
                log_role: log_role,
                csrfmiddlewaretoken: $("[name='csrfmiddlewaretoken']").val()
            },
            success: function (data) {
                if (data.status == 0) {
                    $.each(data.msg, function (k, v) {
                        {#console.log("id_" + k, v[0]);#}
                        {#console.log($("#id_" + k));#}
                        $("#id_" + k).parents().next("span").html(v[0]);
                        setTimeout(function () {
                            $("#id_" + k).parents().next("span").html("");
                        }, 3000);
                    })
                } else if (data.status == 1) {
                    location.href = data.msg;
                } else if (data.status == 3) {
                    $(".notice-erro").html(data.msg);
                    setTimeout(function () {
                        $(".notice-erro").html("");
                    }, 3000);
                } else if (data.status == 4) {
                    $(".notice-erro").html(data.msg);
                    setTimeout(function () {
                        $(".notice-erro").html("");
                    }, 3000);
                }
            }
        })
    })
</script>
</body>
</html>

