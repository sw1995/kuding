{% extends 'base.html' %}
{% block title %}
    个人主页
{% endblock %}
{% block css %}
    <link rel="stylesheet" href="/static/css/m_style.css">
    <link rel="stylesheet" href="/static/css/m_s_evaluate.css">
    <link rel="stylesheet" href="/static/css/m_student.css">
    <link rel="stylesheet" href="/static/css/m_teacher.css">
    <style>
        .modal-body input {

        }
    </style>
{% endblock %}

{% block content %}
    {% if role == "student" %}
        <div id="container">
            <!-- 模态框 -->
            <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                    aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title" id="myModalLabel">课程信息</h4>
                        </div>
                        <div class="modal-body">
                            <form class="form-horizontal" id="forms">
                                {% csrf_token %}
                                <div class="form-group" style="display: none">
                                    <label for="inputt_id" class="col-sm-2 control-label">ID</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" name="t_id" disabled>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputt_head_image" class="col-sm-2 control-label">头像</label>
                                    <div class="col-sm-10">
                                        <input accept="image/*" type="file" name="t_head_image" style="display: none">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputt_account" class="col-sm-2 control-label">手机号</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" name="t_account" disabled>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputt_name" class="col-sm-2 control-label">姓名</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" name="t_name" disabled>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputt_age" class="col-sm-2 control-label">年龄</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" name="t_age" disabled>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputt_sex" class="col-sm-2 control-label">性别</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" name="t_sex" disabled>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputt_degree" class="col-sm-2 control-label">学历</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" name="t_degree" disabled>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputt_detail" class="col-sm-2 control-label">简介</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" name="t_detail" disabled>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputt_remark" class="col-sm-2 control-label">备注</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" name="t_remark" disabled>
                                    </div>
                                </div>
                            </form>

                        </div>
                    </div>
                </div>
            </div>
            <div class="connent">



                <div class="home1 left">
                    {#                    <div class="tagrt left">#}
                    {#                        <i class="fa fa-id-card-o fa-2x" style="color: skyblue; margin: 5px" aria-hidden="true"> 目标</i>#}
                    {#                    </div>#}
                    <div class="teacher_info left">
                        {% csrf_token %}
                        <i class="fa fa-id-card-o fa-2x" style="color: skyblue; margin: 5px ;font-size: 20px"
                           aria-hidden="true">
                            教师信息</i>
                        <table class="table table-hover table-bordered">
                            <thead>
                            <tr>
                                <th class="success">姓名</th>
                                <th class="success">手机号</th>
                                <th class="success">性别</th>
                                <th class="success">年龄</th>
                                <th class="success">操作</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% if t_info_obj %}
                                {% for t_info in t_info_obj %}
                                    <tr>
                                        <td sxy="t_id" class="default hidden">
                                            {{ t_info.t_id }}
                                        </td>
                                        <td sxy="t_name" class="default">
                                            {{ t_info.t_name }}
                                        </td>
                                        <td sxy="t_account" class="default">
                                            {{ t_info.t_account }}
                                        </td>
                                        <td sxy="t_head_image" class="default hidden">
                                            <img src="{{ t_info.t_head_image }}" alt="">
                                        </td>
                                        <td sxy="t_sex" class="default">
                                            {% if t_info.t_sex == 0 %}
                                                男
                                            {% else %}
                                                女
                                            {% endif %}
                                        </td>
                                        <td sxy="t_age" class="default">
                                            {{ t_info.t_age }}
                                        </td>
                                        <td sxy="t_degree" class="default hidden">
                                            {{ t_info.t_degree }}
                                        </td>
                                        <td sxy="t_detail" class="default hidden">
                                            {{ t_info.t_detail }}
                                        </td>
                                        <td class="default">
                                            <a href="#" class="t_info_detail"> 查看详请 </a>
                                        </td>
                                    </tr>
                                {% endfor %}
                            {% else %}
                                <tr class="default">
                                    <td align="center" colspan="5">暂无教师信息</td>
                                </tr>
                            {% endif %}

                            </tbody>
                        </table>
                    </div>
                    <div style="clear: both"></div>
                    <div class="course_info">
                        <i class="fa fa-book fa-2x" style="color: skyblue; margin: 5px; font-size: 20px"
                           aria-hidden="true">课程信息</i>

                        <table class="table table-hover table-bordered">
                            <thead>
                            <tr>
                                <th class="info">课程名称</th>
                                <th class="info">课程数量</th>
                                <th class="info">课程详情</th>
                                <th class="info">课程创造时间</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% if course_list %}
                                {% for course in course_list %}
                                    <tr>
                                        <td class="default">
                                            {{ course.c_name }}
                                        </td>
                                        <td class="default">
                                            {{ course.c_count }}
                                        </td>
                                        <td class="default">
                                            {% if course.c_detail == "" %}
                                                暂无简介
                                            {% else %}
                                                {{ course.c_detail }}
                                            {% endif %}
                                        </td>
                                        {% load str_time %}
                                        <td class="default">
                                            {{ course.c_create_time|strd_time }}
                                        </td>
                                    </tr>
                                {% endfor %}
                            {% else %}
                                <tr class="default">
                                    <td align="center" colspan="4">暂无课程信息</td>
                                </tr>
                            {% endif %}

                            </tbody>
                        </table>
                    </div>
                </div>
                <!-- 代码部分begin -->
                <div class="toolbar">
                    <a href="javascript:;" class="toolbar-item toolbar-item-weixin"><span class="toolbar-layer"></span></a>
                    <a href="javascript:;" class="toolbar-item toolbar-item-feedback"></a>
                    <a href="javascript:;" class="toolbar-item toolbar-item-app"><span class="toolbar-layer"></span></a>
                    <a href="javascript:scroll(0,0)" id="top" class="toolbar-item toolbar-item-top"></a>
                </div>
                <!-- 代码部分end -->
                <div style="clear: both"></div>
            </div>
        </div>
        <script src="/static/plug/bootstrap/js/bootstrap.min.js"></script>

        <script>
            $('.t_info_detail').click(function () {
                $('#myModal').modal('show');
                $(this).parent().prevAll().each(function () {

                    var v = $(this).html();
                    //console.log($.trim(v));
                    var n = $(this).attr('sxy');
                    //console.log(n);

                    if (v.search("<img") != -1) {
                        //console.log(v.search("<img"));
                        //console.log('lalalla');
                        $("#myModal input[name='" + n + "']").next("img").remove();
                        $("#myModal input[name='" + n + "']").after($.trim(v)).next("img").css({
                            "width": "100px",
                            "height": "100px",
                            "margin-left": "150px"
                        });
                    } else {
                        // console.log('hahahahha');
                        $("#myModal input[name='" + n + "']").val($.trim(v)).css("text-align", "center;");
                    }
                })
            });
        </script>
    {% endif %}


    {% if role == "teacher" %}

        <div id="container">
            <!-- 模态框 -->
            <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                    aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title" id="myModalLabel">课程信息</h4>
                        </div>
                        <div class="modal-body">
                            <form class="form-horizontal" id="forms">
                                {% csrf_token %}
                                <div class="form-group" style="display: none">
                                    <label for="inputs_id" class="col-sm-2 control-label">ID</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" name="s_id" disabled>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputs_head_image" class="col-sm-2 control-label">头像</label>
                                    <div class="col-sm-10" style="width: 100px;height: 100px;">
                                        <input accept="image/*" type="file" name="s_head_image" style="display: none">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputs_account" class="col-sm-2 control-label">手机号</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" name="s_account" disabled>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputs_name" class="col-sm-2 control-label">姓名</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" name="s_name" disabled>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputs_sex" class="col-sm-2 control-label">性别</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" name="s_sex" disabled>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputs_grade" class="col-sm-2 control-label">年级</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" name="s_grade" disabled>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputs_email" class="col-sm-2 control-label">邮箱</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" name="s_email" disabled>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputs_remark" class="col-sm-2 control-label">备注</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" name="s_remark" disabled>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <div class="connent">

                <div class="home1 left">
                    {#                    <div class="tagrt left">#}
                    {#                        <i class="fa fa-id-card-o fa-2x" style="color: skyblue; margin: 5px" aria-hidden="true"> 目标</i>#}
                    {#                    </div>#}
                    <div class="teacher_info left">
                        <i class="fa fa-id-card-o fa-2x" style="color: skyblue; margin: 5px; font-size: 20px"
                           aria-hidden="true">
                            学生信息</i>

                        <table class="table table-hover table-bordered">
                            <thead>
                            <tr>
                                <th class="info">学生姓名</th>
                                <th class="info">手机号</th>
                                <th class="info">性别</th>
                                <th class="info">学生年级</th>
                                <th class="info">操作</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% if s_info_list %}
                                {% for s_info in s_info_list %}
                                    <tr>
                                        <td sxy="s_id" class="success hidden">
                                            {{ s_info.s_id }}
                                        </td>
                                        <td sxy="s_head_image" class="success hide">
                                            <img src="{{ s_info.s_head_image }}" alt="">
                                        </td>
                                        <td sxy="s_name" class="success">
                                            {{ s_info.s_name }}
                                        </td>
                                        <td sxy="s_account" class="info">
                                            {{ s_info.s_account }}
                                        </td>
                                        <td sxy="s_sex" class="warning">
                                            {% if s_info.s_sex == 0 %}
                                                男
                                            {% else %}
                                                女
                                            {% endif %}
                                        </td>
                                        <td sxy="s_grade" class="danger">
                                            {{ s_info.s_grade }}
                                        </td>
                                        <td sxy="s_email" class="hidden danger">
                                            {{ s_info.s_email }}
                                        </td>
                                        <td class="danger">
                                            <a href="#" class="s_info_detail"> 查看详请 </a>
                                        </td>
                                    </tr>
                                {% endfor %}
                            {% else %}
                                <tr class="info">
                                    <td align="center" colspan="5">暂无学生信息</td>
                                </tr>
                            {% endif %}
                            </tbody>
                        </table>
                    </div>
                    <div style="clear: both"></div>
                    <div class="course_info">
                        <i class="fa fa-book fa-2x" style="color: skyblue; margin: 5px;font-size: 20px"
                           aria-hidden="true">课程信息</i>
                        <table class="table table-hover table-bordered">
                            <thead>
                            <tr>
                                <th class="success">课程名称</th>
                                <th class="info">课程数量</th>
                                <th class="danger">课程详情</th>
                                <th class="warning">课程创造时间</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% if course_list %}
                                {% for course in course_list %}
                                    <tr>
                                        <td class="success">
                                            {{ course.c_name }}
                                        </td>
                                        <td class="info">
                                            {{ course.c_count }}
                                        </td>
                                        <td class="danger">
                                            {% if course.c_detail == "" %}
                                                暂无简介
                                            {% else %}
                                                {{ course.c_detail }}
                                            {% endif %}
                                        </td>
                                        {% load str_time %}
                                        <td class="warning">
                                            {{ course.c_create_time|strf_time }}
                                        </td>

                                    </tr>
                                {% endfor %}
                            {% else %}
                                <tr class="info">
                                    <td align="center" colspan="4">暂无课程信息</td>
                                </tr>
                            {% endif %}

                            </tbody>
                        </table>
                    </div>
                </div>
                <div style="clear: both"></div>
            </div>
        </div>
        <script src="/static/plug/bootstrap/js/bootstrap.min.js"></script>
        <script>

            $('.s_info_detail').click(function () {
                $('#myModal').modal('show');
                $(this).parent().prevAll().each(function () {

                    var v = $(this).html();

                    var n = $(this).attr('sxy');


                    if (v.search("<img") != -1) {
                        console.log(v.search("<img"));
                        //console.log('lalalla');
                        $("#myModal input[name='" + n + "']").next("img").remove();
                        $("#myModal input[name='" + n + "']").after($.trim(v)).next("img").css({
                            "width": "100px",
                            "height": "100px",
                            "margin-left": "150px"
                        });
                    } else {
                        console.log('hahahahha');
                        $("#myModal input[name='" + n + "']").val($.trim(v)).css("text-align", "center;");
                    }
                })
            });
        </script>
    {% endif %}

{% endblock %}